<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Documenta√ß√£o da API</title>
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist/swagger-ui.css">
  <link rel="stylesheet" href="swagger-custom.css">
  <style>
    body.light-mode {
      background-color: #f5f7fa;
      color: #1e293b;
    }
    body.dark-mode {
      background-color: #0f172a;
      color: #f1f5f9;
    }
    .theme-toggle {
      position: fixed;
      top: 10px;
      right: 20px;
      z-index: 9999;
    }
    .theme-toggle button {
      padding: 8px 14px;
      font-size: 14px;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      background: #2563eb;
      color: white;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .theme-toggle button:hover {
      background: #1d4ed8;
    }
  </style>
</head>
<body class="light-mode">
<div class="theme-toggle">
  <button id="toggle-theme">üåô Modo Escuro</button>
</div>

<div id="swagger-ui"></div>

<script src="https://unpkg.com/swagger-ui-dist/swagger-ui-bundle.js"></script>
<script>
const spec = {
  openapi: "3.0.0",
  info: {
    title: "API de Usu√°rios, Agendamentos e Servi√ßos",
    version: "1.0.0",
    description: "Documenta√ß√£o interativa, organizada e profissional da API."
  },
  servers: [
    { url: "http://localhost:3000", description: "Ambiente Local" },
    { url: "https://api.seusistema.com", description: "Produ√ß√£o" }
  ],
  tags: [
    { name: "Usu√°rios", description: "Opera√ß√µes de gerenciamento de usu√°rios" },
    { name: "Agendamentos", description: "Opera√ß√µes de gerenciamento de agendamentos" },
    { name: "Servi√ßos", description: "Opera√ß√µes de gerenciamento de servi√ßos" }
  ],
  components: {
    securitySchemes: {
      ApiKeyAuth: { type: "apiKey", in: "header", name: "x-api-key" }
    },
    schemas: {
      Usuario: {
        type: "object",
        properties: {
          id: { type: "integer", example: 1 },
          nome: { type: "string", example: "Jo√£o da Silva" },
          email: { type: "string", example: "joao@teste.com" },
          tipoUsuario: { type: "string", example: "admin" }
        }
      },
      UsuarioCreate: {
        type: "object",
        required: ["nome", "email", "senha", "tipoUsuario"],
        properties: {
          nome: { type: "string", example: "Jo√£o da Silva" },
          email: { type: "string", example: "joao@teste.com" },
          senha: { type: "string", example: "123456" },
          tipoUsuario: { type: "string", example: "admin" }
        }
      },
      LoginRequest: {
        type: "object",
        required: ["email", "senha"],
        properties: {
          email: { type: "string", example: "joao@teste.com" },
          senha: { type: "string", example: "123456" }
        }
      },
      AlterarSenha: {
        type: "object",
        required: ["email", "senhaAtual", "novaSenha"],
        properties: {
          email: { type: "string", example: "joao@teste.com" },
          senhaAtual: { type: "string", example: "123456" },
          novaSenha: { type: "string", example: "novaSenha123" }
        }
      },
      RedefinirSenha: {
        type: "object",
        required: ["email", "novaSenha", "confirmarSenha"],
        properties: {
          email: { type: "string", example: "joao@teste.com" },
          novaSenha: { type: "string", example: "novaSenha123" },
          confirmarSenha: { type: "string", example: "novaSenha123" }
        }
      },
      Agendamento: {
        type: "object",
        properties: {
          id: { type: "integer", example: 10 },
          usuarioId: { type: "integer", example: 1 },
          servicoId: { type: "integer", example: 2 },
          data: { type: "string", format: "date-time", example: "2025-08-12T14:30:00Z" }
        }
      },
      Servico: {
        type: "object",
        properties: {
          id: { type: "integer", example: 3 },
          nome: { type: "string", example: "Corte de cabelo" },
          descricao: { type: "string", example: "Corte masculino padr√£o" },
          preco: { type: "number", example: 50.00 }
        }
      }
    }
  },
  security: [{ ApiKeyAuth: [] }],
  paths: {
    "/usuarios/login": {
      post: {
        tags: ["Usu√°rios"],
        summary: "Login de usu√°rio",
        requestBody: { content: { "application/json": { schema: { $ref: "#/components/schemas/LoginRequest" } } } },
        responses: {
          200: { description: "Login realizado com sucesso" },
          400: { description: "Campos obrigat√≥rios ausentes" },
          401: { description: "Senha incorreta" },
          404: { description: "Usu√°rio n√£o encontrado" }
        }
      }
    },
    "/usuarios": {
      get: {
        tags: ["Usu√°rios"],
        summary: "Listar todos os usu√°rios",
        responses: { 200: { description: "Lista de usu√°rios" } }
      }
    },
    "/usuario/{id}": {
      get: {
        tags: ["Usu√°rios"],
        summary: "Buscar usu√°rio por ID",
        parameters: [{ name: "id", in: "path", required: true, schema: { type: "integer" } }],
        responses: { 200: { description: "Usu√°rio encontrado" }, 404: { description: "N√£o encontrado" } }
      }
    },
    "/usuario/inserir": {
      post: {
        tags: ["Usu√°rios"],
        summary: "Criar novo usu√°rio",
        requestBody: { content: { "application/json": { schema: { $ref: "#/components/schemas/UsuarioCreate" } } } },
        responses: { 201: { description: "Usu√°rio criado" } }
      }
    },
    "/usuarios/atualizar/{id}": {
      put: {
        tags: ["Usu√°rios"],
        summary: "Atualizar usu√°rio",
        parameters: [{ name: "id", in: "path", required: true, schema: { type: "integer" } }],
        requestBody: { content: { "application/json": { schema: { $ref: "#/components/schemas/UsuarioCreate" } } } },
        responses: { 200: { description: "Usu√°rio atualizado" } }
      }
    },
    "/usuarios/alterar-senha": {
      put: {
        tags: ["Usu√°rios"],
        summary: "Alterar senha",
        requestBody: { content: { "application/json": { schema: { $ref: "#/components/schemas/AlterarSenha" } } } },
        responses: { 200: { description: "Senha alterada" } }
      }
    },
    "/usuarios/redefinir-senha": {
      put: {
        tags: ["Usu√°rios"],
        summary: "Redefinir senha",
        requestBody: { content: { "application/json": { schema: { $ref: "#/components/schemas/RedefinirSenha" } } } },
        responses: { 200: { description: "Senha redefinida" } }
      }
    },
    "/usuario/deletar/{id}": {
      delete: {
        tags: ["Usu√°rios"],
        summary: "Deletar usu√°rio",
        parameters: [{ name: "id", in: "path", required: true, schema: { type: "integer" } }],
        responses: { 200: { description: "Usu√°rio deletado" } }
      }
    },
    "/agendamentos_vw": {
      get: {
        tags: ["Agendamentos"],
        summary: "Listar agendamentos (view)",
        responses: { 200: { description: "Lista de agendamentos" } }
      }
    },
    "/agendamentos": {
      get: {
        tags: ["Agendamentos"],
        summary: "Listar agendamentos",
        responses: { 200: { description: "Lista de agendamentos" } }
      }
    },
    "/agendamento/{id}": {
      get: {
        tags: ["Agendamentos"],
        summary: "Buscar agendamento por ID",
        parameters: [{ name: "id", in: "path", required: true, schema: { type: "integer" } }],
        responses: { 200: { description: "Agendamento encontrado" } }
      }
    },
    "/agendamento/inserir": {
      post: {
        tags: ["Agendamentos"],
        summary: "Criar agendamento",
        requestBody: { content: { "application/json": { schema: { $ref: "#/components/schemas/Agendamento" } } } },
        responses: { 201: { description: "Criado" } }
      }
    },
    "/agendamento/atualizar/{id}": {
      put: {
        tags: ["Agendamentos"],
        summary: "Atualizar agendamento",
        parameters: [{ name: "id", in: "path", required: true, schema: { type: "integer" } }],
        requestBody: { content: { "application/json": { schema: { $ref: "#/components/schemas/Agendamento" } } } },
        responses: { 200: { description: "Atualizado" } }
      }
    },
    "/agendamento/deletar/{id}": {
      delete: {
        tags: ["Agendamentos"],
        summary: "Deletar agendamento",
        parameters: [{ name: "id", in: "path", required: true, schema: { type: "integer" } }],
        responses: { 200: { description: "Deletado" } }
      }
    },
    "/servicos": {
      get: {
        tags: ["Servi√ßos"],
        summary: "Listar servi√ßos",
        responses: { 200: { description: "Lista de servi√ßos" } }
      }
    },
    "/servico/{id}": {
      get: {
        tags: ["Servi√ßos"],
        summary: "Buscar servi√ßo por ID",
        parameters: [{ name: "id", in: "path", required: true, schema: { type: "integer" } }],
        responses: { 200: { description: "Servi√ßo encontrado" } }
      }
    },
    "/servico/inserir": {
      post: {
        tags: ["Servi√ßos"],
        summary: "Criar servi√ßo",
        requestBody: { content: { "application/json": { schema: { $ref: "#/components/schemas/Servico" } } } },
        responses: { 201: { description: "Criado" } }
      }
    },
    "/servico/atualizar/{id}": {
      put: {
        tags: ["Servi√ßos"],
        summary: "Atualizar servi√ßo",
        parameters: [{ name: "id", in: "path", required: true, schema: { type: "integer" } }],
        requestBody: { content: { "application/json": { schema: { $ref: "#/components/schemas/Servico" } } } },
        responses: { 200: { description: "Atualizado" } }
      }
    },
    "/servico/deletar/{id}": {
      delete: {
        tags: ["Servi√ßos"],
        summary: "Deletar servi√ßo",
        parameters: [{ name: "id", in: "path", required: true, schema: { type: "integer" } }],
        responses: { 200: { description: "Deletado" } }
      }
    }
  }
};

SwaggerUIBundle({
  spec,
  dom_id: '#swagger-ui',
  layout: "BaseLayout",
  docExpansion: "list",
  deepLinking: true,
  filter: true,
  defaultModelsExpandDepth: 2,
  defaultModelExpandDepth: 3,
  defaultModelRendering: "example",
  displayRequestDuration: true
});

// Bot√£o para alternar modo
document.getElementById('toggle-theme').addEventListener('click', () => {
  document.body.classList.toggle('dark-mode');
  document.body.classList.toggle('light-mode');
  document.getElementById('toggle-theme').textContent =
    document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è Modo Claro' : 'üåô Modo Escuro';
});
</script>
<script src="backend-master/swagger.js"></script>
</body>
</html>
